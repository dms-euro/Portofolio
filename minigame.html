<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Tic Tac Toe Space</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
body{
  background: radial-gradient(circle at top,#0b1c3d,#020617);
}

/* cell */
.cell{
  box-shadow: inset 0 0 20px rgba(255,255,255,.15),
              0 0 25px rgba(59,130,246,.3);
  transition: transform .6s, opacity .6s;
}
.glow-x{color:#38bdf8;text-shadow:0 0 25px #38bdf8}
.glow-o{color:#f472b6;text-shadow:0 0 25px #f472b6}

/* win */
.win .cell{
  animation: winGlow 1s infinite alternate;
}
@keyframes winGlow{
  from{box-shadow:0 0 20px #22d3ee}
  to{box-shadow:0 0 45px #38bdf8}
}

/* lose */
.lose .cell{
  animation: fall 1s forwards;
}
@keyframes fall{
  to{
    transform: translateY(400px) rotate(20deg);
    opacity:0;
  }
}

/* draw */
.draw{
  animation: shake .4s linear 4;
}
@keyframes shake{
  25%{transform:translateX(5px)}
  50%{transform:translateX(-5px)}
  75%{transform:translateX(5px)}
}
</style>
</head>

<body class="min-h-screen flex items-center justify-center text-white px-4">

<div id="gameBox" class="max-w-md w-full bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 shadow-2xl">

<h1 class="text-center text-3xl font-bold mb-1 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
ðŸš€ Tic Tac Toe Space
</h1>
<p class="text-center text-gray-300 mb-4">Lawan Bot dari galaksi lain</p>

<!-- SCORE -->
<div class="flex justify-between mb-4 text-center">
  <div class="flex-1">
    <div class="text-sm text-gray-400">Kamu</div>
    <div id="scoreX" class="text-2xl font-bold text-blue-400">0</div>
  </div>
  <div class="flex-1">
    <div class="text-sm text-gray-400">Bot</div>
    <div id="scoreO" class="text-2xl font-bold text-pink-400">0</div>
  </div>
</div>

<!-- LEVEL -->
<div class="flex justify-center gap-2 mb-4 text-sm">
<button onclick="setLevel('easy')" class="px-3 py-1 rounded-full bg-green-500/20 border border-green-400">Mudah</button>
<button onclick="setLevel('medium')" class="px-3 py-1 rounded-full bg-yellow-500/20 border border-yellow-400">Normal</button>
<button onclick="setLevel('hard')" class="px-3 py-1 rounded-full bg-red-500/20 border border-red-400">Pro</button>
</div>

<!-- BOARD -->
<div id="board" class="grid grid-cols-3 gap-3 mb-6">
<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(0)"></div>
<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(1)"></div>
<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(2)"></div>

<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(3)"></div>
<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(4)"></div>
<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(5)"></div>

<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(6)"></div>
<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(7)"></div>
<div class="cell w-24 h-24 flex items-center justify-center text-4xl rounded-xl cursor-pointer" onclick="move(8)"></div>
</div>

<p id="status" class="text-center text-gray-300 text-sm"></p>

</div>

<script>
let board = Array(9).fill(null)
let level = "easy"
let scoreX = 0
let scoreO = 0
const cells = document.querySelectorAll(".cell")
const gameBox = document.getElementById("gameBox")
const statusText = document.getElementById("status")

function setLevel(l){
  level = l
  statusText.innerText = "Level: " + l.toUpperCase()
}

function move(i){
  if(board[i] || checkWinner()) return
  board[i] = "X"
  render()
  if(!checkWinner()) setTimeout(botMove,400)
}

function botMove(){
  let move = level==="easy"?randomMove()
           :level==="medium"?(Math.random()<0.5?randomMove():bestMove())
           :bestMove()
  if(move!=null){
    board[move] = "O"
    render()
  }
}

function randomMove(){
  const empty = board.map((v,i)=>v?null:i).filter(v=>v!==null)
  return empty[Math.floor(Math.random()*empty.length)]
}

function bestMove(){
  let best=-Infinity,move
  board.forEach((v,i)=>{
    if(!v){
      board[i]="O"
      let score=minimax(board,0,false)
      board[i]=null
      if(score>best){best=score;move=i}
    }
  })
  return move
}

function minimax(b,d,isMax){
  let w=checkWinner(b)
  if(w==="O") return 10-d
  if(w==="X") return d-10
  if(!b.includes(null)) return 0
  let best=isMax?-Infinity:Infinity
  b.forEach((v,i)=>{
    if(!v){
      b[i]=isMax?"O":"X"
      let s=minimax(b,d+1,!isMax)
      b[i]=null
      best=isMax?Math.max(best,s):Math.min(best,s)
    }
  })
  return best
}

function checkWinner(b=board){
  const win=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]
  for(let [a,c,d] of win){
    if(b[a]&&b[a]===b[c]&&b[a]===b[d]) return b[a]
  }
  return null
}

function render(){
  cells.forEach((c,i)=>{
    c.innerText = board[i]||""
    c.classList.toggle("glow-x",board[i]==="X")
    c.classList.toggle("glow-o",board[i]==="O")
  })

  let w = checkWinner()
  if(w==="X"){ winEffect(); scoreX++; document.getElementById("scoreX").innerText=scoreX }
  else if(w==="O"){ loseEffect(); scoreO++; document.getElementById("scoreO").innerText=scoreO }
  else if(!board.includes(null)){ drawEffect() }
}

function winEffect(){
  gameBox.classList.add("win")
  statusText.innerText="ðŸŽ‰ KAMU MENANG!"
  autoReset()
}

function loseEffect(){
  gameBox.classList.add("lose")
  statusText.innerText="ðŸ’€ KAMU KALAH!"
  autoReset()
}

function drawEffect(){
  gameBox.classList.add("draw")
  statusText.innerText="âš–ï¸ SERI"
  autoReset()
}

function autoReset(){
  setTimeout(()=>{
    board.fill(null)
    gameBox.className = gameBox.className.replace(/win|lose|draw/g,"")
    render()
  },2500)
}
</script>

</body>
</html>
